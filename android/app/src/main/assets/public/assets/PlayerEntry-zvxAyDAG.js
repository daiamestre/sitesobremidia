import{d as h,u as j,r as t,j as e,L as g,B as i}from"./index-BIw4YUGd.js";import{C,a as y,b as N,c as I,d as v}from"./card-CV21M-nN.js";import{I as E}from"./input-ClxgF6ef.js";import{L as D}from"./label-CZ2eJaUL.js";const T=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,U=/^[a-zA-Z0-9_-]+$/,d=a=>T.test(a)||U.test(a);function $({basePath:a}){const r=h(),{user:m,loading:u}=j(),[n,o]=t.useState(""),[l,c]=t.useState(null),x=t.useMemo(()=>a==="/tv"?"Conectar TV/Player":"Conectar Player",[a]);t.useEffect(()=>{const s=localStorage.getItem("player:last_screen_id");s&&d(s)&&o(s)},[]);const p=()=>{const s=n.trim();if(!d(s)){c("ID inválido. Use o ID personalizado da tela (ex: minha-tela-01) ou UUID.");return}localStorage.setItem("player:last_screen_id",s),r(`${a}/${s}`)},f=()=>{const s=encodeURIComponent(a);r(`/auth?redirect=${s}`)};return e.jsx("main",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(C,{className:"w-full max-w-lg glass",children:[e.jsxs(y,{className:"text-center",children:[e.jsx(g,{className:"justify-center mb-4",size:"lg"}),e.jsx(N,{className:"text-2xl font-display",children:x}),e.jsx(I,{children:a==="/tv"?"Use este endereço dedicado no dispositivo (TV/Android Box) e conecte com uma Tela do dashboard.":"Conecte este player a uma Tela do dashboard."})]}),e.jsx(v,{className:"space-y-4",children:u?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando sessão..."}):m?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"screen-id",children:"ID da Tela"}),e.jsx(E,{id:"screen-id",value:n,onChange:s=>{c(null),o(s.target.value)},placeholder:"Ex: loja-01 ou minha-tela",inputMode:"text",autoCapitalize:"none",autoCorrect:"off",spellCheck:!1})]}),l&&e.jsx("p",{className:"text-sm text-destructive",children:l}),e.jsx(i,{className:"w-full",onClick:p,children:"Conectar e iniciar"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dica: no dashboard, vá em ",e.jsx("strong",{children:"Telas"})," e clique em ",e.jsx("strong",{children:"Abrir Player"})," para testar."]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Para acessar as telas e playlists, faça login com o mesmo usuário do dashboard."}),e.jsx(i,{className:"w-full",onClick:f,children:"Entrar"})]})})]})})}export{$ as default};
