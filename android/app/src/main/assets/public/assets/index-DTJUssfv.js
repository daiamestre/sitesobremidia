import{r as n,al as Y,G as V,n as z,a3 as $,j as d,o as P,E as v,y as q,H as J,F as Q}from"./index-D7tYTXxn.js";var W=Y[" useId ".trim().toString()]||(()=>{}),X=0;function Z(e){const[t,s]=n.useState(W());return V(()=>{s(o=>o??String(X++))},[e]),e||(t?`radix-${t}`:"")}var ee=n.createContext(void 0);function te(e){const t=n.useContext(ee);return e||t||"ltr"}var A="rovingFocusGroup.onEntryFocus",oe={bubbles:!1,cancelable:!0},I="RovingFocusGroup",[_,N,re]=$(I),[ne,ve]=z(I,[re]),[se,ce]=ne(I),O=n.forwardRef((e,t)=>d.jsx(_.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(_.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(ae,{...e,ref:t})})}));O.displayName=I;var ae=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:o,loop:C=!1,dir:S,currentTabStopId:m,defaultCurrentTabStopId:T,onCurrentTabStopIdChange:w,onEntryFocus:p,preventScrollOnEntryFocus:a=!1,...b}=e,g=n.useRef(null),F=q(t,g),R=te(S),[E,r]=J({prop:m,defaultProp:T??null,onChange:w,caller:I}),[i,x]=n.useState(!1),u=Q(p),l=N(s),h=n.useRef(!1),[M,D]=n.useState(0);return n.useEffect(()=>{const c=g.current;if(c)return c.addEventListener(A,u),()=>c.removeEventListener(A,u)},[u]),d.jsx(se,{scope:s,orientation:o,dir:R,loop:C,currentTabStopId:E,onItemFocus:n.useCallback(c=>r(c),[r]),onItemShiftTab:n.useCallback(()=>x(!0),[]),onFocusableItemAdd:n.useCallback(()=>D(c=>c+1),[]),onFocusableItemRemove:n.useCallback(()=>D(c=>c-1),[]),children:d.jsx(P.div,{tabIndex:i||M===0?-1:0,"data-orientation":o,...b,ref:F,style:{outline:"none",...e.style},onMouseDown:v(e.onMouseDown,()=>{h.current=!0}),onFocus:v(e.onFocus,c=>{const k=!h.current;if(c.target===c.currentTarget&&k&&!i){const G=new CustomEvent(A,oe);if(c.currentTarget.dispatchEvent(G),!G.defaultPrevented){const y=l().filter(f=>f.focusable),U=y.find(f=>f.active),B=y.find(f=>f.id===E),H=[U,B,...y].filter(Boolean).map(f=>f.ref.current);L(H,a)}}h.current=!1}),onBlur:v(e.onBlur,()=>x(!1))})})}),K="RovingFocusGroupItem",j=n.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:o=!0,active:C=!1,tabStopId:S,children:m,...T}=e,w=Z(),p=S||w,a=ce(K,s),b=a.currentTabStopId===p,g=N(s),{onFocusableItemAdd:F,onFocusableItemRemove:R,currentTabStopId:E}=a;return n.useEffect(()=>{if(o)return F(),()=>R()},[o,F,R]),d.jsx(_.ItemSlot,{scope:s,id:p,focusable:o,active:C,children:d.jsx(P.span,{tabIndex:b?0:-1,"data-orientation":a.orientation,...T,ref:t,onMouseDown:v(e.onMouseDown,r=>{o?a.onItemFocus(p):r.preventDefault()}),onFocus:v(e.onFocus,()=>a.onItemFocus(p)),onKeyDown:v(e.onKeyDown,r=>{if(r.key==="Tab"&&r.shiftKey){a.onItemShiftTab();return}if(r.target!==r.currentTarget)return;const i=le(r,a.orientation,a.dir);if(i!==void 0){if(r.metaKey||r.ctrlKey||r.altKey||r.shiftKey)return;r.preventDefault();let u=g().filter(l=>l.focusable).map(l=>l.ref.current);if(i==="last")u.reverse();else if(i==="prev"||i==="next"){i==="prev"&&u.reverse();const l=u.indexOf(r.currentTarget);u=a.loop?fe(u,l+1):u.slice(l+1)}setTimeout(()=>L(u))}}),children:typeof m=="function"?m({isCurrentTabStop:b,hasTabStop:E!=null}):m})})});j.displayName=K;var ue={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ie(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function le(e,t,s){const o=ie(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return ue[o]}function L(e,t=!1){const s=document.activeElement;for(const o of e)if(o===s||(o.focus({preventScroll:t}),document.activeElement!==s))return}function fe(e,t){return e.map((s,o)=>e[(t+o)%e.length])}var me=O,Ie=j;export{Ie as I,me as R,Z as a,ve as c,te as u};
