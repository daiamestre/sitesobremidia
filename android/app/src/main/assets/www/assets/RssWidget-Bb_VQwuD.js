import{c as g,r,j as e,g as H}from"./index-CJORkoEG.js";import{f as q,p as K}from"./pt-BR-0dgV4ihQ.js";import{C as E,N as L}from"./newspaper-D4jvJn8g.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=g("CloudLightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=g("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=g("CloudSnow",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=g("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=g("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]);function ce({showDate:t=!0,showSeconds:h=!1,backgroundImage:s,className:l=""}){const[a,n]=r.useState(new Date);r.useEffect(()=>{const y=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(y)},[]);const j=h?"HH:mm:ss":"HH:mm";return e.jsxs("div",{className:`relative flex flex-col items-center justify-center text-white h-full w-full overflow-hidden ${l}`,children:[s&&e.jsx(e.Fragment,{children:e.jsx("img",{src:s,alt:"Background",className:"absolute inset-0 w-full h-full object-cover -z-10",style:{objectPosition:"center"}})}),e.jsxs("div",{className:"z-10 text-center drop-shadow-md",children:[e.jsx("p",{className:"text-[7rem] leading-none font-black tracking-tighter",children:q(a,j)}),t&&e.jsx("p",{className:"text-4xl text-white/90 mt-4 font-bold",children:q(a,"EEEE, dd 'de' MMMM",{locale:K})})]})]})}const ee=t=>t===0?e.jsx(Y,{className:"h-12 w-12 text-yellow-400 drop-shadow-lg"}):t>=1&&t<=3?e.jsx(E,{className:"h-12 w-12 text-gray-300 drop-shadow-lg"}):t>=45&&t<=48?e.jsx(E,{className:"h-12 w-12 text-gray-400 drop-shadow-lg"}):t>=51&&t<=67?e.jsx(T,{className:"h-12 w-12 text-blue-400 drop-shadow-lg"}):t>=71&&t<=77?e.jsx(F,{className:"h-12 w-12 text-blue-200 drop-shadow-lg"}):t>=80&&t<=82?e.jsx(T,{className:"h-12 w-12 text-blue-500 drop-shadow-lg"}):t>=85&&t<=86?e.jsx(F,{className:"h-12 w-12 text-white drop-shadow-lg"}):t>=95&&t<=99?e.jsx(Q,{className:"h-12 w-12 text-yellow-300 drop-shadow-lg"}):e.jsx(E,{className:"h-12 w-12 text-gray-300 drop-shadow-lg"}),te=t=>t===0?"Céu limpo":t>=1&&t<=3?"Parcialmente nublado":t>=45&&t<=48?"Neblina":t>=51&&t<=55?"Garoa":t>=56&&t<=57?"Garoa congelante":t>=61&&t<=65?"Chuva":t>=66&&t<=67?"Chuva congelante":t>=71&&t<=75?"Neve":t===77?"Granizo":t>=80&&t<=82?"Pancadas de chuva":t>=85&&t<=86?"Pancadas de neve":t>=95&&t<=99?"Tempestade":"Desconhecido";function he({latitude:t=-23.5505,longitude:h=-46.6333,backgroundImage:s,className:l=""}){const[a,n]=r.useState(null),[j,y]=r.useState(!0),[i,b]=r.useState(null);return r.useEffect(()=>{const f=async()=>{try{const x=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${h}&current=temperature_2m,weather_code,wind_speed_10m&timezone=auto`);if(!x.ok)throw new Error("Failed to fetch weather");const p=await x.json();n({temperature:Math.round(p.current.temperature_2m),weatherCode:p.current.weather_code,windSpeed:Math.round(p.current.wind_speed_10m)}),b(null)}catch(x){console.error("Weather fetch error:",x),b("Erro ao carregar clima")}finally{y(!1)}};f();const k=setInterval(f,30*60*1e3);return()=>clearInterval(k)},[t,h]),j?e.jsx("div",{className:`text-white flex items-center justify-center ${l}`,children:e.jsx(H,{className:"h-8 w-8 animate-spin"})}):i||!a?null:e.jsxs("div",{className:`relative flex flex-col items-center justify-center text-white p-6 h-full w-full overflow-hidden ${l}`,children:[s&&e.jsx(e.Fragment,{children:e.jsx("img",{src:s,alt:"Background",className:"absolute inset-0 w-full h-full object-cover -z-10",style:{objectPosition:"center"}})}),e.jsxs("div",{className:"z-10 flex flex-col items-center gap-6 drop-shadow-md",children:[e.jsx("div",{className:"scale-[2.5] mb-4",children:ee(a.weatherCode)}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-[8rem] leading-none font-black tracking-tighter",children:[a.temperature,"°"]}),e.jsx("p",{className:"text-4xl text-white/90 font-bold capitalize mt-2",children:te(a.weatherCode)})]}),e.jsxs("div",{className:"flex items-center gap-3 text-white/90 bg-black/30 px-6 py-2 rounded-full mt-6 backdrop-blur-sm",children:[e.jsx(Z,{className:"h-6 w-6"}),e.jsxs("span",{className:"text-2xl font-semibold",children:[a.windSpeed," km/h"]})]})]})]})}function me({feedUrl:t="https://g1.globo.com/rss/g1/",maxItems:h=10,scrollSpeed:s=8,className:l="",variant:a="full",backgroundImage:n,backgroundImageLandscape:j,backgroundImagePortrait:y}){const[i,b]=r.useState([]),[f,k]=r.useState(0),[x,p]=r.useState(!0),[B,v]=r.useState(null);if(r.useEffect(()=>{let m=!0;const o=new AbortController,z=setTimeout(()=>o.abort(),15e3);(async()=>{try{console.log("[RSS] Fetching via proxy:",t);const N=`https://corsproxy.io/?${encodeURIComponent(t)}`,S=await fetch(N,{signal:o.signal});if(!S.ok)throw new Error(`Network response was not ok: ${S.status}`);const G=await S.text(),I=new DOMParser().parseFromString(G,"text/xml");if(I.querySelector("parsererror"))throw new Error("XML Parsing failed");const O=I.querySelectorAll("item"),M=[];O.forEach((d,V)=>{var W,_,D,P;if(V>=h)return;const R=((W=d.querySelector("title"))==null?void 0:W.textContent)||"",X=((_=d.querySelector("link"))==null?void 0:_.textContent)||"",J=((D=d.querySelector("pubDate"))==null?void 0:D.textContent)||"",C=((P=d.querySelector("description"))==null?void 0:P.textContent)||"";let c="";const A=d.getElementsByTagNameNS("http://search.yahoo.com/mrss/","content");if(A.length>0&&(c=A[0].getAttribute("url")||""),!c){const u=d.querySelector("enclosure");u&&(c=u.getAttribute("url")||"")}if(!c&&C)try{const $=new DOMParser().parseFromString(C,"text/html").querySelector("img");$&&(c=$.getAttribute("src")||"")}catch{}if(!c){const u=d.getElementsByTagName("media:content");u.length>0&&(c=u[0].getAttribute("url")||"")}R&&M.push({title:R,link:X,pubDate:J,description:C,imageUrl:c})}),m&&(M.length>0?(b(M),v(null)):(console.warn("[RSS] No items found in feed"),v("Nenhum item encontrado no RSS.")))}catch(N){console.error("[RSS] Client-side fetch error:",N),m&&(N.name==="AbortError"?v("Tempo limite de conexão excedido."):v("Erro ao carregar notícias. Verifique a conexão."))}finally{clearTimeout(z),m&&p(!1)}})();const U=setInterval(()=>{},10*60*1e3);return()=>{m=!1,o.abort(),clearTimeout(z),clearInterval(U)}},[t,h]),r.useEffect(()=>{if(i.length===0)return;const m=setInterval(()=>{k(o=>(o+1)%i.length)},s*1e3);return()=>clearInterval(m)},[i.length,s]),x)return e.jsx("div",{className:`text-white flex items-center justify-center h-full w-full bg-black ${l}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(H,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Carregando notícias..."})]})});if(B||i.length===0)return e.jsxs("div",{className:`relative w-full h-full bg-black flex items-center justify-center ${l}`,children:[n?e.jsx("img",{src:n,className:"absolute inset-0 w-full h-full object-cover opacity-50"}):null,e.jsxs("div",{className:"relative z-10 flex flex-col items-center p-4 bg-black/60 rounded-xl backdrop-blur-md border border-white/10",children:[e.jsx(L,{className:"h-10 w-10 text-gray-500 mb-2"}),e.jsx("p",{className:"text-gray-300 font-medium",children:"Feed Indisponível"})]})]});const w=i[f];return e.jsxs("div",{className:`relative w-full h-full flex flex-col justify-end overflow-hidden bg-black ${l}`,children:[e.jsxs("div",{className:"absolute inset-0 z-0 select-none pointer-events-none",children:[w.imageUrl?e.jsx("img",{src:w.imageUrl,alt:w.title,className:"w-full h-full object-cover animate-in fade-in duration-700"},w.imageUrl):n?e.jsx("img",{src:n,alt:"Background",className:"w-full h-full object-cover opacity-60"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-900 to-slate-900 flex items-center justify-center",children:e.jsx(L,{className:"h-32 w-32 text-white/5"})}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-4/5 bg-gradient-to-t from-black via-black/80 to-transparent opacity-90"})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-7xl mx-auto px-8 pb-12 md:pb-16 flex flex-col justify-end h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 animate-in slide-in-from-bottom-5 duration-700 fade-in",children:[e.jsx("span",{className:"bg-[#c4170c] text-white text-[10px] md:text-xs font-bold px-3 py-1 rounded shadow-sm uppercase tracking-wider",children:"Ao Vivo"}),e.jsx("div",{className:"h-4 w-px bg-white/30"}),e.jsx("span",{className:"text-gray-300 text-xs md:text-sm font-medium uppercase tracking-widest truncate max-w-[200px]",children:new URL(t).hostname.replace(/^www\./,"")})]}),e.jsx("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-black text-white leading-[1.1] drop-shadow-2xl line-clamp-3 mb-6 animate-in slide-in-from-bottom-5 duration-1000 fill-mode-both delay-100",children:w.title}),e.jsx("div",{className:"w-full max-w-md animate-in slide-in-from-bottom-5 duration-1000 fill-mode-both delay-200",children:e.jsx("div",{className:"flex gap-1.5 h-1.5 w-full",children:i.map((m,o)=>e.jsx("div",{className:`flex-1 rounded-full transition-all duration-300 ${o===f?"bg-white shadow-[0_0_8px_rgba(255,255,255,0.6)]":"bg-white/20"}`},o))})})]})]})}export{ce as C,me as R,he as W};
